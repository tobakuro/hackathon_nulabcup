# 開発 Issue リスト

優先度は上から順に高い。ハッカソン向けに最低限動くものを最優先とする。

---

## Epic 0: 事前準備
- [x] **[0-1] **Nix(Devbox)による開発環境のセットアップ**（Go, Next.js, PostgreSQL, Redis）

## Epic 1: インフラ・基盤セットアップ

- [x] **[1-1] PostgreSQLスキーマの構築** (`users`, `match_histories`)
- [x] **[1-2] RedisのセットアップとキーDB設計**
- [x] **[1-3] Goバックエンドの雛形作成**（フレームワーク選定・WS基盤）

---

## Epic 2: 認証・ユーザー管理
  
- [x] **[2-1] GitHub OAuth ログインの実装** (NextAuth.js)
- [ ] **[2-2] `GET /api/v1/users/me` の実装** (Go)
- [ ] **[2-3] GitHubアクセストークンの暗号化保存**

---

## Epic 3: 問題自動生成エンジン ← 最優先・最難関

- [ ] **[3-1] GitHub APIからのコードフェッチ処理**（リポジトリ一覧・ファイル取得）
- [ ] **[3-2] LLMプロンプトエンジニアリングと検証**
  - 詳細: `docs/PROMPT.md` 参照
  - JSONスキーマの強制（Structured Outputs）
- [ ] **[3-3] 問題生成の並行処理化** (Go `errgroup`)

---

## Epic 4: マッチングシステム

- [x] **[4-1] WebSocket接続とマッチングキューの管理** (`ws://{host}/ws/matchmake`)
- [x] **[4-2] マッチング成立イベント送信** (`ev_match_found`)

---

## Epic 5: バトルシステム・ゲームループ

- [ ] **[5-1] ゲームルームと進行ループの実装** (Go `select` & `channel`)
- [ ] **[5-2] ターン開始・出題イベント** (`ev_turn_start`)
- [ ] **[5-3] 「じぶんにヌーを掛ける」ベット処理** (`act_bet_gnu`)
- [ ] **[5-4] 回答受付・勝敗・ポイント計算処理** (`act_submit_answer`)
- [ ] **[5-5] ターン結果・Tips送信** (`ev_turn_result`)
- [ ] **[5-6] 試合終了・リザルト処理** (`ev_game_end`)
- [ ] **[5-7] 切断時のTKO処理**（WebSocket `onClose` ハンドリング）

---

## Epic 6: フロントエンド実装 (Next.js)

- [ ] **[6-1] ホーム画面・戦績・保有ヌー表示**
- [ ] **[6-2] マッチング待機画面のアニメーション**
- [ ] **[6-3] バトル画面UIの作成**
  - `react-syntax-highlighter` でコード表示
  - 15秒プログレスバー（表示完了からカウント開始）
  - 4択ボタンコンポーネント
- [ ] **[6-4] ヌーを掛けるベットUI**（スライダー等）
- [ ] **[6-5] ターンごとのTips表示・リザルト画面**
  - SNSシェア機能（任意）

---

## 保留・スコープ外（ハッカソン中は対応しない）

- レート別マッチング（キューを分割する実装）
- GitHubトークンのリフレッシュ処理（失効時はre-auth強制で代替）
- 問題難易度のLLM側検証（出題順序の固定で代替）
